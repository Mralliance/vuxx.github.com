---
layout: post
title: Linux 常用的一些命令
description: centos的一些常用命令
category: blog
---

##链接网络
* `dhclient` 类session，重启恢复原状
* `vim /etc/sysconfig/network-scripts/ifcfg-eth0` 根据自己的情况修改配置

    
	
		DEVICE=eth0
		WADDR=08:00:27:29:78:25
		TYPE=Ethernet
		UUID=76ac35fa-0dc1-42b8-9894-572998d949fe
		ONBOOT=yes
		NM_CONTROLLED=yes
		BOOTPROTO=static

		NETMASK=255.255.255.0
		IPADDR=192.168.1.200
		GATEWAY=192.168.1.1
		DNS1=8.8.8.8

##压缩解压缩
* `zip passwd.zip passwd` 把passwd压缩成passwd.zip
* `unzip passwd.zip` 解压缩
* `gzip passwd` gzip压缩
* `gzip -d passwd.gz` gzip解压
* `bzip2 passwd` bzip2 压缩
* `bzip2 -d passwd.bz2` 解压
###tar 文件打包
* `-j`    bzip2
* `-z`    gzip
* `-f`    设置文件名
* `-c`	  新建打包文件
* `-v`    显示过程
* `-x`    解压
* `-t`    查看包中内容
* `tar -zcvf /backup/etc.tar.gz /etc` 把/etc/压缩到/bakcup/etc.tar.gz中
* `tar -zxvf /backup/etc.tar.gz` 解压 
* `tar -ztvf /backup/tec.tar.gz` 查看压缩内容

##Vi&Vim
###基本操作
* `:` 命令模式
* `esc` 一般模式
* `i` 编辑模式
* `w` 保存
* `q` 退出
###插入模式
* `i` 当前位置插入
* `I` 在首航插入
* `a` 下一个字符
* `A` 行尾插入
* `o` 下一行插入
* `O` 上一行插入
### 常用一些操作
* `:sh` 把vim放入后台
* `exit` 返回vim
* `:w!` 强制保存
* `:q!` 强制退出
* `:w b.php` 另存为
###高级操作
* `:set nu` 显示行号
* `:set nonu` 关闭行号
* `:set tabstop=4` tab制表位
* `:set autoindent` 自动缩进
* `:/word` 查找word  `:n` 查找下一个
* `1,10s/serach/replace/gc` 从第1行到第10行查找search/替换成replace，/g全部替换/c 替换时问我一下
* `u` 撤销操作
* `dd` 剪切
* `3dd` 当前行剪切3行
* `p` 粘贴到上一行
* `P`  粘贴到上一行
* `yy` 复制
* `5yy` 当前行复制5行
* `:r file` 导入文件
* `:sp index.php` 开起个新窗口打卡index.php
* `ctrl+w+上|下键` 切换窗口->按下ctrl+w松开，在按上下
* 配置vim配置文件在自己家中新建`vim .vimrc` 更改配置

	     set nu
    	 set tabstop=4
    	 set autoindent

##特殊权限标志位

###suid:4
* suid 当执行文件会自动变身文件的所有者执行文件
* suid必须是可执行（编译后）的文件，且其他人要有执行权限
* `chmod 4751 /etc/passwd` 通过最前面的4来设置文件

###sgid:2
* sgid 当执行文件会自动变身文件所属组执行文件
* 给目录设置成sgid，当在这个目录里创建操作的时候会自动把新创建的文件所属组设置成这个目录的所属组
* `chmod 2770 /test/sgid ` 

###sbit:1
* 适合建公共文件，大家都可以上传，但虽然有该目录w权限不能破坏别人的文件
* `chmod 1777 /test/sbit`

###ACL
* user group other 对other更细致的权限分配
* 需要文件系统的支持ext2以上
* `dumpe2fs -h /dev/sda2 | grep acl` 查看sda2是否支持
* 当acl不好使 `vim /etc/fstabl` 把挂在acl这个的目录磁盘修改`defatutls,acl` 
*  `setfacl -m u:li：rwx /test/acl` 给acl目录分配li用户的rwx权限 
* `getfacl /test/acl` 查看acl目录权限
* `setfacl -m g:blog:rwx acl` 给acl目录分配blog组wrx权限
* setfacl用户|组的权限与mask权限有`交集`setfacl的权限才能生效
* `setfacl -m m:r acl` 如以上设置acl权限只有r的权限了
* 一般我们mask是rwx，
#####suid sgid sbit acl chmod chown chgrp usermod passwd -l 构成日常所需的权限设定